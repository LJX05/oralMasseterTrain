webpackJsonp([1],{"/w8P":function(e,t){},0:function(e,t){},"0PIF":function(e,t){},1:function(e,t){},2:function(e,t){},"7xIN":function(e,t){},KZ9I:function(e,t){},KpTc:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};a.d(i,"timestampToTime",function(){return T}),a.d(i,"setStore",function(){return $}),a.d(i,"getStore",function(){return U}),a.d(i,"removeStore",function(){return z}),a.d(i,"setCookie",function(){return S}),a.d(i,"getCookie",function(){return V}),a.d(i,"delCookie",function(){return C});var r=a("fZjL"),o=a.n(r),l=a("7+uW"),s=a("zL8q"),n=a.n(s),d=(a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var m=a("VU/8")({name:"App"},d,!1,function(e){a("OGNB")},null,null).exports,c=a("/ocq"),u=a("mvHQ"),p=a.n(u),f=a("mtWM"),g=a.n(f),h=a("Xxa5"),v=a.n(h),b=a("exGp"),y=a.n(b),I=a("//Fk"),_=a.n(I),F=this;g.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var k=g.a.create({baseURL:window.location.href.split("/")[0]+"//"+window.location.href.split("/")[2]+"/",timeout:1e4});k.interceptors.response.use(function(e){if(302!==e.status)return e;confirmMessage("登录失效，重新登录"),clearCacheEnterLogin(),router.push("/login")},function(e){if(e.response){var t=e.response;500==t.status?errorMessage("网络错误，请检查您的网络"):t.data&&t.data.msg&&errorMessage(t.data.msg)}return _.a.reject(e)});var w,x=(w=y()(v.a.mark(function e(t,a,i){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({method:t,url:a,headers:{"Content-Type":"application/json",token:localStorage.getItem("logintoken")},data:i});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,F)})),function(e,t,a){return w.apply(this,arguments)}),N=function(e){return x("post","/api/Role/getRoleList",e)},T=function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},$=function(e,t){e&&("string"!=typeof t&&(t=p()(t)),window.localStorage.setItem(e,t))},U=function(e){if(e)return window.localStorage.getItem(e)},z=function(e){e&&window.localStorage.removeItem(e)};function S(e,t,a){var i=new Date;i.setDate(i.getDate()+a),document.cookie=e+"="+t+";expires="+i}function V(e){var t=RegExp(e+"=([^;]+)"),a=document.cookie.match(t);return a?a[1]:""}function C(e){S(e,null,-1)}a("NC6I");var P={name:"login",data:function(){return{logining:!1,rememberpwd:!1,ruleForm:{username:"",password:"",rememberMe:!1,code:"",randomStr:"",codeimg:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){this.getuserpwd()},methods:{getuserpwd:function(){""!=V("user")&&""!=V("pwd")&&(this.ruleForm.username=V("user"),this.ruleForm.password=V("pwd"),this.rememberpwd=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.getcode(),t.$message.error("请输入用户名密码！"),t.logining=!1,!1;var a;t.logining=!0,(a=t.ruleForm,x("post","/api/account/signIn",a)).then(function(e){if(!(e.data.code>0))return t.$message.error(e.data.message),t.logining=!1,!1;t.ruleForm.rememberMe?(S("user",t.ruleForm.username,7),S("pwd",t.ruleForm.password,7)):(C("user"),C("pwd")),setTimeout(function(){t.logining=!1,localStorage.setItem("logintoken",e.data.token),localStorage.setItem("userdata",p()(e.data)),t.$store.commit("login","true"),t.$router.push({path:"/index"})},1e3)})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{"label-position":"left",model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",model:{value:e.ruleForm.rememberMe,callback:function(t){e.$set(e.ruleForm,"rememberMe",t)},expression:"ruleForm.rememberMe"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(P,A,!1,function(e){a("PSqM")},"data-v-b7999e88",null).exports,E={name:"navcon",data:function(){return{collapsed:!0,imgshow:a("gQKk"),imgsq:a("rWRm"),user:{}}},created:function(){this.user=JSON.parse(localStorage.getItem("userdata"))},methods:{exit:function(){var e=this;this.$confirm("退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){x("get","/api/account/loginOut").then(function(t){if(!(t.data.code>0))return e.$message.error(t.data.message),e.logining=!1,!1;setTimeout(function(){e.$store.commit("logout","false"),e.$router.push({path:"/login"}),e.$message({type:"success",message:"已退出登录!"})},1e3)}).catch(function(t){e.logining=!1,e.$message.error("退出失败，请稍后再试！")})}).catch(function(){e.$message({type:"info",message:"已取消"})})},toggle:function(e){this.collapsed=!e,this.$root.Bus.$emit("toggle",this.collapsed)}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#334157","text-color":"#fff","active-text-color":"#fff"}},[a("el-button",{staticClass:"buttonimg"},[a("img",{staticClass:"showimg",attrs:{src:e.collapsed?e.imgsq:e.imgshow},on:{click:function(t){return e.toggle(e.collapsed)}}})]),e._v(" "),a("el-submenu",{staticClass:"submenu",attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("超级管理员")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[e._v("设置")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"},on:{click:function(t){return e.content()}}},[e._v("个人中心")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-3"},on:{click:function(t){return e.exit()}}},[e._v("退出")])],2)],1)},staticRenderFns:[]};var K={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2",collapse:e.collapsed,"collapse-transition":"",router:"","default-active":e.$route.path,"unique-opened":"","background-color":"#334157","text-color":"#fff","active-text-color":"#ffd04b"}},[i("div",{staticClass:"logobox"},[i("img",{staticClass:"logoimg",attrs:{src:a("dLd/"),alt:""}})]),e._v(" "),e._l(e.allmenu,function(t){return i("el-submenu",{key:t.menuid,attrs:{index:t.menuname}},[i("template",{slot:"title"},[i("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),i("span",[e._v(e._s(t.menuname))])]),e._v(" "),i("el-menu-item-group",e._l(t.menus,function(t){return i("el-menu-item",{key:t.menuid,attrs:{index:"/"+t.url}},[i("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),i("span",[e._v(e._s(t.menuname))])])}),1)],2)})],2)},staticRenderFns:[]};var R={name:"index",data:function(){return{showclass:"asideshow",showtype:!1}},components:{navcon:a("VU/8")(E,M,!1,function(e){a("rnpa")},"data-v-1171b1a6",null).exports,leftnav:a("VU/8")({name:"leftnav",data:function(){return{collapsed:!1,allmenu:[]}},created:function(){var e=this;this.allmenu=[{menuid:1,icon:"li-icon-xiangmuguanli",menuname:"基础管理",hasThird:null,url:null,menus:[{menuid:2,icon:"icon-cat-skuQuery",menuname:"患者管理",hasThird:"N",url:"baseManage/Patient",menus:null},{menuid:21,icon:"icon-order-manage",menuname:"视频管理",hasThird:"N",url:"baseManage/VideoManage",menus:null}]},{menuid:71,icon:"li-icon-xitongguanli",menuname:"系统管理",hasThird:null,url:null,menus:[{menuid:72,icon:"icon-cus-manage",menuname:"用户管理",hasThird:"N",url:"system/user",menus:null},{menuid:174,icon:"icon-cms-manage",menuname:"菜单管理",hasThird:"N",url:"system/Module",menus:null},{menuid:73,icon:"icon-news-manage",menuname:"角色管理",hasThird:"N",url:"system/Role",menus:null},{menuid:75,icon:"icon-promotion-manage",menuname:"系统环境变量",hasThird:"N",url:"system/Variable",menus:null},{menuid:76,icon:"icon-cms-manage",menuname:"权限管理",hasThird:"N",url:"system/Permission",menus:null}]}],this.$root.Bus.$on("toggle",function(t){e.collapsed=!t})}},K,!1,function(e){a("gy1J")},null,null).exports},methods:{},created:function(){var e=this;this.$root.Bus.$on("toggle",function(t){t?e.showclass="asideshow":setTimeout(function(){e.showclass="aside"},300)})},beforeUpdate:function(){},beforeMount:function(){this.$message({message:"登录成功",type:"success"})}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticClass:"index-con"},[t("el-aside",{class:this.showclass},[t("leftnav")],1),this._v(" "),t("el-container",{staticClass:"main-con"},[t("el-header",{staticClass:"index-header"},[t("navcon")],1),this._v(" "),t("el-main",{attrs:{clss:"index-main"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]};var L=a("VU/8")(R,q,!1,function(e){a("ox3T")},null,null).exports,O=function(e){return x("get","/api/Video",e)},B=function(e){return x("get","/api/Video/GetVideoUrl/"+e)},H={render:function(){var e=this.$createElement;return(this._self._c||e)("el-pagination",{staticClass:"page-box",attrs:{background:"","current-page":this.childMsg.currentPage,"page-sizes":[10,20,30,40],"page-size":this.childMsg.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.childMsg.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})},staticRenderFns:[]};var X=a("VU/8")({name:"Pagination",props:["childMsg"],data:function(){return{pageparm:{currentPage:this.childMsg.currentPage,pageSize:this.childMsg.pageSize}}},created:function(){},methods:{handleSizeChange:function(e){this.pageparm.pageSize=e,this.$emit("callFather",this.pageparm)},handleCurrentChange:function(e){this.pageparm.currentPage=e,this.$emit("callFather",this.pageparm)}}},H,!1,function(e){a("qVru")},null,null).exports,W={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,settingFormVisible:!1,settingVideo:{pid:"",tid:""},settingVideoOptions:[],viewVideoUrl:"",replyFormVisible:!1,videoTitle:"视频",title:"添加",drawer:!1,todayClockInId:"",marks:[],editForm:{replyContent:""},currentDayVideos:[],activities:[],form:{},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptNo:[{required:!0,message:"请输入部门代码",trigger:"blur"}]},formInline:{pageIndex:1,pageSize:10,search:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,(t=e,x("get","/api/Patient/",t)).then(function(e){a.loading=!1,e.data.code<0?a.$message({type:"info",message:e.data.message}):(a.listData=e.data.data.list,a.pageparm.currentPage=a.formInline.pageIndex,a.pageparm.pageSize=a.formInline.pageSize,a.pageparm.total=e.data.count)}).catch(function(e){a.loading=!1,a.$message.error("失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){var a=this;if(null!=t.lastCheckInVideos&&0!=t.lastCheckInVideos.length){this.viewVideoUrl="",this.loading=!0;B(t.lastCheckInVideos[0].id).then(function(e){e.data.code>0?(console.log("打开视频"+e.data.data),a.viewVideoUrl=e.data.data,a.todayClockInId=t.todayClockInId,a.currentDayVideos=t.lastCheckInVideos,a.editFormVisible=!0):a.$message({type:"info",message:e.data.message}),a.loading=!1}).catch(function(e){a.$message.error(e),a.loading=!1})}else this.$message({type:"info",message:"没有视频"})},changeVideo:function(e){var t=this;B(e).then(function(e){e.data.code>0?(console.log("打开视频"+e.data.data),t.viewVideoUrl=e.data.data):t.$message({type:"info",message:e.data.message}),t.loading=!1}).catch(function(e){t.$message.error(e),t.loading=!1})},remindClock:function(e,t){this.$message({type:"success",message:"功能暂无开放"})},openSetTeachingVideo:function(e,t){var a,i=this;this.settingVideo.pid=t.id,this.settingFormVisible=!0,(a=this.settingVideo.pid,x("get","/api/Patient/getSetting/"+a)).then(function(e){e.data.code>0?(i.activities=e.data.data.activities,i.settingVideo.tid=e.data.data.setTeachVideoId):i.$message({type:"info",message:e.data.message})}).catch(function(e){i.loading=!1,i.$message.error("保存失败，请稍后再试！")}),O({pageIndex:1,pageSize:50,search:""}).then(function(e){e.data.code>0?i.settingVideoOptions=e.data.data.list:i.$message({type:"info",message:e.data.message})}).catch(function(e){i.loading=!1,i.$message.error("失败，请稍后再试！")})},settingTeachingVideo:function(){var e,t=this;(e={pid:this.settingVideo.pid,tid:this.settingVideo.tid},x("put","/api/Patient/"+e.pid,e.tid)).then(function(e){e.data.code>0?(t.settingVideo.pid="",t.settingFormVisible=!1):t.$message({type:"info",message:e.data.message})}).catch(function(e){t.loading=!1,t.$message.error("保存失败，请稍后再试！")})},submitForm:function(){var e,t=this;(e={id:this.todayClockInId,content:this.editForm.replyContent},x("put","/api/ClockIn/feedback/"+e.id,'"'+e.content+'"')).then(function(e){t.loading=!1,t.$message({type:"success",message:e.data.message}),t.closeVideoDialog()}).catch(function(e){t.loading=!1,t.$message.error("失败，请稍后再试！")})},deleteUser:function(e,t){var a=this;this.$confirm("确定此患者以结束治疗吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){deptDelete(t.deptId).then(function(e){e.success?(a.$message({type:"success",message:"公司已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("公司删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"选择取消"})})},closeDialog:function(){this.loading=!1,this.editFormVisible=!1,this.replyFormVisible=!1,this.settingFormVisible=!1},closeVideoDialog:function(){this.$refs.videoPlay.pause(),this.closeDialog()},openVideoDialog:function(){},openCalendar:function(e){var t,a=this;this.drawer=!0,(t=e.openId,x("get","/api/ClockIn/"+t)).then(function(e){e.data.code>0?a.marks=e.data.data:a.$message({type:"info",message:e.data.message})}).catch(function(e){a.$message.error(e)})},exportExcel:function(){var e=document.getElementById("ou"),t=this.$XLSX.utils.table_to_book(e),a=this.$XLSX.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{this.$FileSaver.saveAs(new Blob([a],{type:"application/octet-stream"}),"sheetjs.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,a)}return a}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("患者管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入患者名称"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-document"},on:{click:e.exportExcel}},[e._v("导出Excel")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",id:"ou",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"患者姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sex",label:"患者性别",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"createdAt",label:"初始登记时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.createdAt)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sameDayIsCheck",align:"center",label:"当天是否签到",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",label:"当月详情",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openCalendar(t.row)}}},[e._v("打开日历\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"teachName",label:"当前治疗视频",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.remindClock(t.$index,t.row)}}},[e._v("提醒打卡")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("查看当天视频")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.openSetTeachingVideo(t.$index,t.row)}}},[e._v("设置治疗视频")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-drawer",{ref:"refdrawer",attrs:{visible:e.drawer,size:"35%","with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[a("span",{staticStyle:{color:"red",margin:"15px 15px"}},[e._v("备注：点击已签到可以播放当天视频")]),e._v(" "),a("el-calendar",{scopedSlots:e._u([{key:"dateCell",fn:function(t){t.date;var i=t.data;return[a("p",{class:i.isSelected?"is-selected":""},[e._v("\n          "+e._s(i.day.split("-").slice(1).join("-"))+"\n        ")]),e._v(" "),e._l(e.marks,function(t,r){return a("div",{key:r,staticStyle:{width:"0px",height:"0px"}},[i.day==t.date?a("el-tag",{attrs:{size:"mini","disable-transitions":!1},on:{click:function(a){return e.handleEdit("",{todayClockInId:t.id,lastCheckInVideos:t.videos})}}},[e._v("已签到\n          ")]):e._e()],1)})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.videoTitle,visible:e.editFormVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeVideoDialog,open:e.openVideoDialog}},[a("div",[a("video",{ref:"videoPlay",attrs:{width:"100%",height:"100%",src:e.viewVideoUrl,autoPlay:"",preload:"auto",controls:""}})]),e._v(" "),a("div",[a("el-button-group",e._l(e.currentDayVideos,function(t){return a("el-button",{key:t.id,attrs:{type:"danger"},on:{click:function(a){return e.changeVideo(t.id)}}},[e._v("\n         "+e._s(t.name)+"\n        ")])}),1)],1),e._v(" "),a("div",[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{attrs:{label:"评价","label-width":"80"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.replyContent,callback:function(t){e.$set(e.editForm,"replyContent",t)},expression:"editForm.replyContent"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("回复患者\n      ")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.closeVideoDialog}},[e._v("取消")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"设置视频",visible:e.settingFormVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.settingFormVisible=t},click:e.closeDialog}},[a("el-form",[a("el-form-item",{attrs:{label:"教学视频",prop:"roles"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:e.settingVideo.tid,callback:function(t){e.$set(e.settingVideo,"tid",t)},expression:"settingVideo.tid"}},e._l(e.settingVideoOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-timeline",{attrs:{reverse:"true"}},e._l(e.activities,function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.timestamp}},[e._v("\n        "+e._s(t.content)+"\n      ")])}),1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.settingTeachingVideo()}}},[e._v("保存\n      ")])],1)],1)],1)},staticRenderFns:[]};var j=a("VU/8")(W,Y,!1,function(e){a("ef1p")},"data-v-05846064",null).exports,Q={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,replyFormVisible:!1,title:"添加",drawer:!1,marks:["2022-07-01","2022-07-02","2022-07-03"],editForm:{deptId:"",deptName:"",deptNo:"",token:localStorage.getItem("logintoken")},videoForm:{},uploadFileLink:{},viewVideoUrl:"",rules:{name:[{required:!0,message:"请输入视频名称",trigger:"blur"}],describe:[{required:!0,message:"请输入视频描述",trigger:"blur"}]},formInline:{pageIndex:1,pageSize:10,search:""},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=this;this.loading=!0,O(e).then(function(e){t.loading=!1,e.data.code<=0?t.$message({type:"info",message:e.msg}):(t.listData=e.data.data.list,t.pageparm.currentPage=t.formInline.pageIndex,t.pageparm.pageSize=t.formInline.pageSize,t.pageparm.total=e.data.data.count)}).catch(function(e){t.loading=!1,t.$message.error("加载失败，请稍后再试！")})},callFather:function(e){this.formInline.pageIndex=e.currentPage,this.formInline.pageSize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){var a=this;this.viewVideoUrl="",this.loading=!0;B(t.id).then(function(e){e.data.code>0?(console.log("打开视频"+e.data.data),a.viewVideoUrl=e.data.data,a.editFormVisible=!0):a.$message({type:"info",message:e.data.message})}).catch(function(e){a.$message.error(e),a.loading=!1})},remindClock:function(e,t){this.$message({type:"success",message:"提醒患者成功"})},submitForm:function(e){var t=this;return y()(v.a.mark(function e(){var a,i,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.videoForm,i=t.$refs.upload._data.uploadFiles[0].raw,t.loading=!0,e.next=5,t.uploadFile(t.uploadFileLink,i,i.name);case 5:if(r=e.sent){e.next=9;break}return t.$message.error("文件上传失败!---云托管上传失败"),e.abrupt("return");case 9:a.fileId=r,a.type="教学视频",(o=a,x("post","/api/Video",o)).then(function(e){t.loading=!1,e.data.code>0?t.$message.success("文件上传成功!"):t.$message.error("文件上传失败!"),t.closeDialog(),t.videoForm={},t.getdata(t.formInline)}).catch(function(e){t.$message.error(e),t.loading=!1});case 12:case"end":return e.stop()}var o},e,t)}))()},customUpload:function(e){var t,a=this;this.loading=!0,(t=e.file.name,x("post","/api/File/?fileName="+t)).then(function(e){e.data.code>0?a.uploadFileLink=e.data.data:a.$message.error("文件上传失败!"),a.loading=!1})},deleteVideo:function(e,t){var a=this;this.$confirm("确定此视频吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,x("delete","/api/Video/"+e)).then(function(e){e.data.code>0?(a.$message({type:"success",message:"已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"选择取消"})})},closeDialog:function(){this.loading=!1,this.editFormVisible=!1,this.replyFormVisible=!1},closeVideoDialog:function(){this.$refs.videoPlay.pause(),this.closeDialog()},openVideoDialog:function(){},uploadFile:function(e,t,a){var i=this;return y()(v.a.mark(function r(){var o;return v.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(o=new FormData).append("key",e.key),o.append("Signature",e.authorization),o.append("x-cos-security-token",e.token),o.append("x-cos-meta-fileid",e.cos_file_id),o.append("file",t,a),r.next=8,i.request(e.url,"POST",o);case 8:if(""==r.sent){r.next=11;break}return r.abrupt("return","");case 11:return r.abrupt("return",e.fileid);case 12:case"end":return r.stop()}},r,i)}))()},request:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new _.a(function(i,r){var o=new XMLHttpRequest;o.withCredentials=!0,o.addEventListener("readystatechange",function(){4===this.readyState&&i(this.responseText)}),o.open(t,e),o.send(a)})}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("视频管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入视频名称"},model:{value:e.formInline.search,callback:function(t){e.$set(e.formInline,"search",t)},expression:"formInline.search"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-add"},on:{click:function(t){e.replyFormVisible=!0}}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",id:"ou",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"视频名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"type",label:"视频类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"初始上传人",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"createdAt",label:"上传时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.createdAt)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"describe",label:"视频描述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("查看视频")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteVideo(t.$index,t.row)}}},[e._v("删除/停用")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:"视频",visible:e.editFormVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeVideoDialog,open:e.openVideoDialog}},[a("div",[a("video",{ref:"videoPlay",attrs:{width:"100%",height:"100%",src:e.viewVideoUrl,autoPlay:"",preload:"auto",controls:""}})]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeVideoDialog}},[e._v("取消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"新增教学视频",visible:e.replyFormVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.replyFormVisible=t},click:e.closeDialog}},[a("el-form",{attrs:{model:e.videoForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"视频名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.videoForm.name,callback:function(t){e.$set(e.videoForm,"name",t)},expression:"videoForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"视频描述",prop:"describe","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.videoForm.describe,callback:function(t){e.$set(e.videoForm,"describe",t)},expression:"videoForm.describe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"视频文件","label-width":e.formLabelWidth}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:".mp4",multiple:!1,"show-file-list":e.ture,action:"void","http-request":e.customUpload,"auto-upload":"",limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存\n      ")])],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(Q,J,!1,function(e){a("ce66")},"data-v-359a5078",null).exports,Z={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("基础菜单 机器信息管理")])},staticRenderFns:[]};var ee=a("VU/8")({},Z,!1,function(e){a("dPK7")},null,null).exports,te={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("基础菜单 货道信息管理")])},staticRenderFns:[]};var ae=a("VU/8")({},te,!1,function(e){a("qgky")},null,null).exports,ie={data:function(){return{loading:!1,editFormVisible:!1,title:"预览",payType:[{key:"请选择",value:0},{key:"现金",value:1},{key:"支付宝",value:2},{key:"微信",value:3},{key:"POS通",value:4},{key:"闪付",value:5},{key:"POS通C扫B",value:6},{key:"银联二维码",value:8},{key:"会员余额支付",value:9}],payway:[{key:"请选择",value:0},{key:"初始化",value:1},{key:"已支付",value:2},{key:"出货成功",value:3},{key:"出货失败",value:4},{key:"订单超时",value:5},{key:"退款初始化",value:11},{key:"退款进行中",value:12},{key:"退款成功",value:13},{key:"退款失败",value:14},{key:"订单处理中",value:10}],editForm:{id:"",name:"",payType:1,partner:"",subMchId:"",appid:"",notifyUrl:"",signType:"",partnerKey:"",sellerUserId:"",certPath:"",certPassword:"",rsaKey:"",token:localStorage.getItem("logintoken")},formInline:{page:1,limit:10,machineNo:"",orderNo:"",transId:"",payType:0,orderStatus:0,token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=23,a=[{addUser:null,editUser:null,addTime:1526380193e3,editTime:1526380193e3,orderId:109,deptId:1,deptName:"xxxx",orderNo:"xxxx",transId:"xxxx",payType:6,subPayType:"WXPay",transType:"退款",machineNo:"111111",goodsNo:"123456",goodsPrice:.01,payAmount:-.01,goodsName:"可乐",aisleNo:null,orderStatus:14,openId:null,mchId:"111111111111111",subMchId:null,remark:"不允许从此IP发起交易: 101.81.251.226"},{addUser:null,editUser:null,addTime:1526380176e3,editTime:1526380176e3,orderId:108,deptId:1,deptName:"xxxxxx",orderNo:"xxxx",transId:"xxxxx",payType:6,subPayType:"WXPay",transType:"退款",machineNo:"J1AX904002",goodsNo:"123456",goodsPrice:.01,payAmount:-.01,goodsName:"可乐",aisleNo:null,orderStatus:14,openId:null,mchId:"898310154990338",subMchId:null,remark:"不允许从此IP发起交易: 101.81.251.226"},{addUser:null,editUser:null,addTime:1524921444e3,editTime:1524894094e3,orderId:107,deptId:1,deptName:"xxxxxx",orderNo:"J1AX90400220180428101723945",transId:"4200000137201804287543647891",payType:6,subPayType:"WXPay",transType:"消费",machineNo:"J1AX904002",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:7,openId:null,mchId:"898310154990338",subMchId:null,remark:"无法找到指定的账单"},{addUser:null,editUser:null,addTime:1521307596e3,editTime:1524641207e3,orderId:20,deptId:1,deptName:"xxxx",orderNo:"9300079120180318142634440",transId:null,payType:0,subPayType:"0",transType:"消费",machineNo:"111111111111111",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:7,openId:null,mchId:null,subMchId:null,remark:"1111111111111111111111"},{addUser:null,editUser:null,addTime:1520195909e3,editTime:1520195909e3,orderId:19,deptId:1,deptName:"xxxx",orderNo:"9300079120180305183828606",transId:null,payType:0,subPayType:"0",transType:"消费",machineNo:"93000791",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:1,openId:null,mchId:null,subMchId:null,remark:null},{addUser:null,editUser:null,addTime:152003518e4,editTime:152003518e4,orderId:18,deptId:1,deptName:"xxxx",orderNo:"4200000056201803031934477774",transId:"9300079120180303170851281",payType:6,subPayType:"WXPay",transType:"退款",machineNo:"222222222222222222",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:8,openId:null,mchId:"898310154990338",subMchId:null,remark:null},{addUser:null,editUser:null,addTime:1520020261e3,editTime:1520185478e3,orderId:17,deptId:1,deptName:"xxxx",orderNo:"9300079120180303175059985",transId:"4200000072201803031887274444",payType:6,subPayType:"WXPay",transType:"消费",machineNo:"93000791",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:7,openId:null,mchId:"898310154990338",subMchId:null,remark:"不允许从此IP发起交易: 116.247.119.165"},{addUser:null,editUser:null,addTime:1520019911e3,editTime:1520020075e3,orderId:16,deptId:1,deptName:"xxxx",orderNo:"9300079120180303174511778",transId:"4200000055201803031949877221",payType:6,subPayType:"WXPay",transType:"消费",machineNo:"93000791",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:1,openId:null,mchId:"898310154990338",subMchId:null,remark:null},{addUser:null,editUser:null,addTime:1520019776e3,editTime:1520019776e3,orderId:15,deptId:1,deptName:"xxxx",orderNo:"9300079120180303174256156",transId:null,payType:0,subPayType:"0",transType:"消费",machineNo:"93000791",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:1,openId:null,mchId:null,subMchId:null,remark:null},{addUser:null,editUser:null,addTime:1520019729e3,editTime:1520019729e3,orderId:14,deptId:1,deptName:"上海XX",orderNo:"9300079120180303174208429",transId:null,payType:0,subPayType:"0",transType:"消费",machineNo:"93000791",goodsNo:"123456",goodsPrice:.01,payAmount:.01,goodsName:"可乐",aisleNo:null,orderStatus:1,openId:null,mchId:null,subMchId:null,remark:null}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=t},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;ConfigSave(t.editForm).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("支付配置信息保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ConfigDelete(t.deptId).then(function(e){e.success?(a.$message({type:"success",message:"公司已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("支付配置信息删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.editFormVisible=!1,this.$refs[e].resetFields()}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("交易订单")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入终端编号"},model:{value:e.formInline.machineNo,callback:function(t){e.$set(e.formInline,"machineNo",t)},expression:"formInline.machineNo"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"small",placeholder:"输入订单号"},model:{value:e.formInline.orderNo,callback:function(t){e.$set(e.formInline,"orderNo",t)},expression:"formInline.orderNo"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"small",placeholder:"输入交易单号"},model:{value:e.formInline.transId,callback:function(t){e.$set(e.formInline,"transId",t)},expression:"formInline.transId"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.payType,callback:function(t){e.$set(e.formInline,"payType",t)},expression:"formInline.payType"}},e._l(e.payType,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.orderStatus,callback:function(t){e.$set(e.formInline,"orderStatus",t)},expression:"formInline.orderStatus"}},e._l(e.payway,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"machineNo",label:"终端编号",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"orderNo",label:"订单号",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"transId",label:"交易单号",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"payType",label:"支付方式",width:"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"transType",label:"交易类型",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"goodsPrice",label:"商品价格",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"payAmount",label:"支付金额",width:"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"goodsName",label:"商品名称",width:"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"orderStatus",label:"订单状态",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"addTime",label:"创建时间",width:"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.addTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("退款")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"50%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("editForm")}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公司编号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称",disabled:""},model:{value:e.editForm.deptId,callback:function(t){e.$set(e.editForm,"deptId",t)},expression:"editForm.deptId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户号",disabled:""},model:{value:e.editForm.orderNo,callback:function(t){e.$set(e.editForm,"orderNo",t)},expression:"editForm.orderNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户号",disabled:""},model:{value:e.editForm.payType,callback:function(t){e.$set(e.editForm,"payType",t)},expression:"editForm.payType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"交易类型"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信子商户",disabled:""},model:{value:e.editForm.transType,callback:function(t){e.$set(e.editForm,"transType",t)},expression:"editForm.transType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品编号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入应用ID",disabled:""},model:{value:e.editForm.goodsNo,callback:function(t){e.$set(e.editForm,"goodsNo",t)},expression:"editForm.goodsNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付金额"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入通知回调",disabled:""},model:{value:e.editForm.payAmount,callback:function(t){e.$set(e.editForm,"payAmount",t)},expression:"editForm.payAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"货道号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入加密类型",disabled:""},model:{value:e.editForm.aisleNo,callback:function(t){e.$set(e.editForm,"aisleNo",t)},expression:"editForm.aisleNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"买家标识"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户签名密钥",disabled:""},model:{value:e.editForm.openId,callback:function(t){e.$set(e.editForm,"openId",t)},expression:"editForm.openId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子商户号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入支付宝卖家",disabled:""},model:{value:e.editForm.subMchId,callback:function(t){e.$set(e.editForm,"subMchId",t)},expression:"editForm.subMchId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称",disabled:""},model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"交易单号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户号",disabled:""},model:{value:e.editForm.transId,callback:function(t){e.$set(e.editForm,"transId",t)},expression:"editForm.transId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子支付方式"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户号",disabled:""},model:{value:e.editForm.subPayType,callback:function(t){e.$set(e.editForm,"subPayType",t)},expression:"editForm.subPayType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终端编号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信子商户",disabled:""},model:{value:e.editForm.machineNo,callback:function(t){e.$set(e.editForm,"machineNo",t)},expression:"editForm.machineNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品价格"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入应用ID",disabled:""},model:{value:e.editForm.goodsPrice,callback:function(t){e.$set(e.editForm,"goodsPrice",t)},expression:"editForm.goodsPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入通知回调",disabled:""},model:{value:e.editForm.goodsName,callback:function(t){e.$set(e.editForm,"goodsName",t)},expression:"editForm.goodsName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单状态"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入加密类型",disabled:""},model:{value:e.editForm.orderStatus,callback:function(t){e.$set(e.editForm,"orderStatus",t)},expression:"editForm.orderStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商户号"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户签名密钥",disabled:""},model:{value:e.editForm.mchId,callback:function(t){e.$set(e.editForm,"mchId",t)},expression:"editForm.mchId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"编辑用户"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入支付宝卖家",disabled:""},model:{value:e.editForm.editUser,callback:function(t){e.$set(e.editForm,"editUser",t)},expression:"editForm.editUser"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信证书路径",disabled:""},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1)],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(ie,re,!1,function(e){a("KZ9I")},"data-v-34ba4624",null).exports,le={data:function(){return{nshow:!0,fshow:!1,loading:!1,title:"添加用户",editFormVisible:!1,dataAccessshow:!1,unitAccessshow:!1,editForm:{userId:"",userName:"",realName:"",roles:[],userMobile:"",userEmail:"",userSex:"",token:localStorage.getItem("logintoken")},unitparm:{userIds:"",deptId:"",deptName:""},selectdata:[],rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"请输入用户名,不能包含中文",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],roles:[{required:!0,message:"请选择角色",trigger:"blur"}],userMobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1(3\d|47|5((?!4)\d)|7(0|1|[6-8])|8\d)\d{8,8}$/,required:!0,message:"请输入正确的手机号",trigger:"blur"}],userEmail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,required:!0,message:"请输入正确的邮箱",trigger:"blur"}],userSex:[{required:!0,message:"请选择性别",trigger:"blur"}]},seletedata:{ids:"",token:localStorage.getItem("logintoken")},resetpsd:{userId:"",token:localStorage.getItem("logintoken")},offline:{token:localStorage.getItem("logintoken")},formInline:{pageIndex:1,pageSize:10,search:""},userData:[],roleOptions:[],UserDept:[],defaultProps:{children:"children",label:"name"},checkmenu:[],saveroleId:"",pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},watch:{},created:function(){this.getdata(this.formInline),this.getRoledata()},methods:{getdata:function(e){var t,a=this;this.loading=!0,(t=e,x("post","/api/User/getUserList",t)).then(function(e){a.loading=!1,e.data.code<0?a.$message({type:"info",message:e.data.message}):(a.userData=e.data.data.list,a.pageparm.currentPage=a.formInline.pageIndex,a.pageparm.pageSize=a.formInline.pageSize,a.pageparm.total=e.data.data.count)}).catch(function(e){a.loading=!1,a.$message.error("用户列表获取失败，请重新登录！")})},getRoledata:function(){var e=this;N({pageIndex:1,pageSize:1e3}).then(function(t){t.data.code<0?e.$message({type:"info",message:t.data.message}):(e.roleOptions=[],t.data.data.list.forEach(function(t){var a={id:t.id,name:t.roleName};e.roleOptions.push(a)}))})},callFather:function(e){this.formInline.pageIndex=e.currentPage,this.formInline.pageSize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},editType:function(e,t){var a=this;this.loading=!0;var i={lock:"",userId:"",token:localStorage.getItem("logintoken")};i.userId=t.id;var r,o=t.isLock;i.lock=o,(r=i,x("put","/api/User/lock/"+r.userId+"?isLock="+r.lock)).then(function(e){a.loading=!1,e.data.code<0?a.$message({type:"info",message:e.data.message}):(a.$message({type:"success",message:"状态修改成功"}),a.getdata(a.formInline))})},handleEdit:function(e,t){var a,i=this;this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改用户",this.editForm.userId=t.id,this.editForm.userName=t.userName,this.loading=!0,(a=t.id,x("get","/api/User/"+a)).then(function(e){if(e.data.code>0){var t=e.data.data;i.editForm.realName=t.realName,i.editForm.roles=t.roles,i.editForm.userMobile=t.userMobile,i.editForm.userEmail=t.userEmail,i.editForm.userSex=t.userSex}i.loading=!1}).catch(function(e){i.$message.error("获取详情失败，请稍后再试！"),i.loading=!1})):(this.title="添加用户",this.editForm.userId="",this.editForm.userName="",this.editForm.realName="",this.editForm.roles=[],this.editForm.userMobile="",this.editForm.userEmail="",this.editForm.userSex="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;""==t.editForm.userId?(a=t.editForm,x("post","/api/User/register",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.data.code>0?(t.getdata(t.formInline),t.$message({type:"success",message:"数据保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("保存失败，请稍后再试！")}):function(e){return x("put","/api/User/update/"+e.userId,e)}(t.editForm).then(function(e){t.editFormVisible=!1,t.loading=!1,e.data.code>0?(t.getdata(t.formInline),t.$message({type:"success",message:"数据保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("保存失败，请稍后再试！")})})},handleunit:function(e,t){var a=this;this.unitAccessshow=!0;var i;(i=0,g.a.get("/api/UserDept/deptTree/"+i+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?a.UserDept=a.changeArr(e.data.data):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("配置权限失败,请稍后再试！")})},handleClick:function(e,t,a){t&&(this.$refs.tree.setCheckedNodes([]),this.$refs.tree.setCheckedNodes([e]),this.unitparm.deptId=e.id,this.unitparm.deptName=e.name)},unitPermSave:function(){var e,t=this,a=this.selectdata,i=[];if(0!=a)for(var r=0;r<a.length;r++)i.push(a[r].userId);this.unitparm.userIds=i.join(","),(e=this.unitparm,x("post","/api/User/change/dept",e)).then(function(e){t.unitAccessshow=!1,e.success?(t.$message({type:"success",message:"部门设置成功！"}),t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("部门设置失败,请稍后再试！")})},selectChange:function(e){this.selectdata=e},closeDialog:function(e){"edit"==e?this.editFormVisible=!1:"perm"==e?this.dataAccessshow=!1:"unit"==e&&(this.unitAccessshow=!1)},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,x("delete","/api/User/delete/"+e)).then(function(e){e.data.code>0?(a.$message({type:"success",message:"数据已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.data.message})}).catch(function(e){a.loading=!1,a.$message.error("数据删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除！"})})},resetpwd:function(e,t){var a=this;this.resetpsd.userId=t.id,this.$confirm("确定要重置密码吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=a.resetpsd.userId,x("put","/api/User/pwd/"+e)).then(function(e){e.data.code>0?(a.$message({type:"success",message:"重置密码成功！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.data.message})}).catch(function(e){a.loading=!1,a.$message.error("重置密码失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"取消重置密码！"})})},dataAccess:function(e,t){var a,i=this;this.dataAccessshow=!0,this.saveroleId=t.userId,(a=t.userId,g.a.get("/api/UserDept/tree/"+a+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?(i.checkmenu=i.changemenu(e.data.data),i.UserDept=i.changeArr(e.data.data)):i.$message({type:"info",message:e.data.msg})}).catch(function(e){i.loading=!1,i.$message.error("获取权限失败，请稍后再试！")})},changeArr:function(e){for(var t={},a=[],i=0;0!=e.length;){if(0==e[i].pId)a.push({id:e[i].id,name:e[i].name,pId:e[i].pId,open:e[i].open,checked:e[i].checked,children:[]}),t[e[i].id]=[a.length-1],e.splice(i,1),i--;else{var r=t[e[i].pId];if(void 0!=r){for(var o=a[r[0]],l=1;l<r.length;l++)o=o.children[r[l]];o.children.push({id:e[i].id,name:e[i].name,pId:e[i].pId,open:e[i].open,checked:e[i].checked,children:[]}),t[e[i].id]=r.concat([o.children.length-1]),e.splice(i,1),i--}}++i>e.length-1&&(i=0)}return a},changemenu:function(e){for(var t=[],a=0;a<e.length;a++)e[a].checked&&t.push(e[a].id);return t},menuPermSave:function(){var e,t=this,a={userId:this.saveroleId,deptIds:""},i=this.$refs.tree.getCheckedNodes(),r=[];if(0!=i.length){for(var o=0;o<i.length;o++)r.push(i[o].id);a.deptIds=p()(r)}(e=a,x("post","/api/UserDept/save",e)).then(function(e){e.success?(t.$message({type:"success",message:"权限保存成功"}),t.dataAccessshow=!1,t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("权限保存失败，请稍后再试！")})},offlineUser:function(e,t){var a=this;this.$confirm("确定要让"+t.userName+"用户下线吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.userName,x("get","/api/User/expireToken/"+e,{})).then(function(e){e.success?(a.$message({type:"success",message:"用户"+t.userName+"强制下线成功！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("用户下线失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消"})})},refreshCache:function(e,t){var a,i=this;(a=t.userName,x("get","/api/User/flashCache/"+a,{})).then(function(e){e.success?(i.$message({type:"success",message:"刷新成功！"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("刷新失败，请稍后再试！")})}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.isLock,callback:function(t){e.$set(e.formInline,"isLock",t)},expression:"formInline.isLock"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"N"}}),e._v(" "),a("el-option",{attrs:{label:"已锁定",value:"Y"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入用户名"},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.formInline.userMobile,callback:function(t){e.$set(e.formInline,"userMobile",t)},expression:"formInline.userMobile"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.userData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userName",label:"用户名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"realName",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userMobile",label:"手机号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userSex",label:"性别","min-width":"60"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userEmail",label:"邮件","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"editTime",label:"修改时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"isLock",label:"状态(锁定)","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.editType(t.$index,t.row)}},model:{value:t.row.isLock?e.nshow:e.fshow,callback:function(a){e.$set(t.row,"isLock?nshow:fshow",a)},expression:"scope.row.isLock?nshow:fshow"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.resetpwd(t.$index,t.row)}}},[e._v("重置密码")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.dataAccess(t.$index,t.row)}}},[e._v("数据权限")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("edit")}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"editForm",attrs:{"label-width":"80px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.editForm.realName,callback:function(t){e.$set(e.editForm,"realName",t)},expression:"editForm.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roles"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:e.editForm.roles,callback:function(t){e.$set(e.editForm,"roles",t)},expression:"editForm.roles"}},e._l(e.roleOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"userMobile"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.editForm.userMobile,callback:function(t){e.$set(e.editForm,"userMobile",t)},expression:"editForm.userMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件",prop:"userEmail"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入邮箱地址"},model:{value:e.editForm.userEmail,callback:function(t){e.$set(e.editForm,"userEmail",t)},expression:"editForm.userEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"userSex"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.editForm.userSex,callback:function(t){e.$set(e.editForm,"userSex",t)},expression:"editForm.userSex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:e.editForm.userSex,callback:function(t){e.$set(e.editForm,"userSex",t)},expression:"editForm.userSex"}},[e._v("女")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("edit")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存\n      ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"数据权限",visible:e.dataAccessshow,width:"30%"},on:{"update:visible":function(t){e.dataAccessshow=t},click:function(t){return e.closeDialog("perm")}}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.UserDept,props:e.defaultProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":""}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("perm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.menuPermSave}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"所属单位",visible:e.unitAccessshow,width:"30%"},on:{"update:visible":function(t){e.unitAccessshow=t},click:function(t){return e.closeDialog("unit")}}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.UserDept,props:e.defaultProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":"","check-strictly":""},on:{"check-change":e.handleClick}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("unit")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.unitPermSave}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ne=a("VU/8")(le,se,!1,function(e){a("KpTc")},"data-v-24c4ccc1",null).exports,de={data:function(){return{showdelete:!1,treeData:[],defaultProps:{children:"children",label:"name"},form:{addUser:"",editUser:"",addTime:"",editTime:"",moduleId:"",parentId:"",moduleLevel:"",systemNo:"",isLeaf:"",fullIndex:"",moduleIcon:"",moduleOrder:"",moduleName:"",moduleNotes:"",moduleUrl:""},rules:{parentId:[{required:!0,message:"请选择父级菜单",trigger:"blur"}],moduleName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],moduleIcon:[{required:!0,message:"请输入菜单图标",trigger:"blur"}],moduleUrl:[{required:!0,message:"请输入URL",trigger:"blur"}],moduleOrder:[{required:!0,message:"请输入菜单顺序",trigger:"blur"}]},fmenu:[]}},created:function(){this.getdata(),this.getmenu()},methods:{getdata:function(){var e=this;x("post","/api/Module/list").then(function(t){e.treeData=[{id:1,pId:0,name:"平台顶级",open:!0,checked:!1},{id:2,pId:1,name:"一层",open:!0,checked:!1},{id:3,pId:1,name:"一层",open:!0,checked:!1},{id:12,pId:1,name:"一层",open:!0,checked:!1},{id:13,pId:1,name:"一层",open:!0,checked:!1},{id:17,pId:1,name:"一层",open:!0,checked:!1},{id:4,pId:2,name:"一层",open:!0,checked:!1},{id:5,pId:2,name:"一层",open:!0,checked:!1},{id:6,pId:2,name:"一层",open:!0,checked:!1},{id:7,pId:2,name:"一层",open:!0,checked:!1}]}).catch(function(t){e.loading=!1,e.$message.error("菜单管理列表失败，请稍后再试！")})},addModule:function(){this.showdelete=!1,this.form.addUser="",this.form.editUser="",this.form.addTime="",this.form.editTime="",this.form.moduleId="",this.form.parentId="",this.form.moduleLevel="",this.form.systemNo="",this.form.isLeaf="",this.form.fullIndex="",this.form.moduleIcon="",this.form.moduleOrder="",this.form.moduleName="",this.form.moduleNotes="",this.form.moduleUrl=""},getmenu:function(){var e,t=this;(e={page:"1",limit:"10"},x("post","/api/Module/nodes",e)).then(function(e){t.fmenu=e.data}).catch(function(e){t.loading=!1,t.$message.error("父级菜单列表获取失败，请稍后再试！")})},handleClick:function(e,t,a){t&&(this.$refs.tree.setCheckedNodes([]),this.$refs.tree.setCheckedNodes([e]),this.showdelete=!0)},nodeclick:function(e,t,a){var i,r=this;(i=e.id,g.a.get("/api/Module/get/"+i+"?token="+localStorage.getItem("logintoken"))).then(function(t){console.log(p()(t)),r.form=t.data.data,r.$refs.tree.setCheckedNodes([]),r.$refs.tree.setCheckedNodes([e])}).catch(function(e){r.loading=!1,r.$message.error("用户管理获取失败，请稍后再试！")})},saveModule:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.form,x("post","/api/Module/save",a)).then(function(e){t.getdata(),t.getmenu()}).catch(function(e){t.$message.error("菜单管理列表保存失败，请稍后再试！")})})},deleteModule:function(){var e,t=this;(e=this.form.moduleId,g.a.delete("/api/Module/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){t.getdata(),t.getmenu(),t.$message.error("菜单管理列表删除成功！")}).catch(function(e){t.$message.error("菜单管理列表删除失败，请稍后再试！")})}}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("菜单管理")])],1),e._v(" "),a("el-row",[a("div",{staticClass:"modt-box"},[e._v("用户管理")]),e._v(" "),a("el-col",{attrs:{span:4}}),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"mod-btnbox"},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("全部展开")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("全部压缩")])],1),e._v(" "),a("el-tree",{ref:"tree",staticClass:"treeclass",attrs:{data:e.treeData,"default-expand-all":"",props:e.defaultProps,"check-strictly":"","node-key":"id","show-checkbox":""},on:{"node-click":e.nodeclick,"check-change":e.handleClick}})],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"mod-btnbox"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addModule}},[e._v("添加")])],1),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"父级菜单",prop:"parentId"}},[a("el-select",{staticClass:"selectw",attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.fmenu,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称",prop:"moduleName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,"moduleName",t)},expression:"form.moduleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"moduleIcon"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleIcon,callback:function(t){e.$set(e.form,"moduleIcon",t)},expression:"form.moduleIcon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"moduleUrl"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleUrl,callback:function(t){e.$set(e.form,"moduleUrl",t)},expression:"form.moduleUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"moduleOrder"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleOrder,callback:function(t){e.$set(e.form,"moduleOrder",t)},expression:"form.moduleOrder"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.saveModule("form")}}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showdelete,expression:"showdelete"}],attrs:{size:"small",type:"primary"},on:{click:e.deleteModule}},[e._v("删除")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var ce=a("VU/8")(de,me,!1,function(e){a("sPkX")},null,null).exports,ue={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,menuAccessshow:!1,title:"添加",editForm:{id:"",roleNo:"",roleName:"",mark:""},rules:{roleNo:[{required:!0,message:"请输入角色代码",trigger:"blur"}],roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},formInline:{pageIndex:1,pageSize:10,search:""},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],RoleRight:[],RoleRightProps:{children:"children",label:"name"},checkmenu:[],saveroleId:"",pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},watch:{},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=this;N(e).then(function(e){t.loading=!1,e.data.code<0?t.$message({type:"info",message:e.message}):(t.listData=e.data.data.list,t.pageparm.currentPage=t.formInline.pageIndex,t.pageparm.pageSize=t.formInline.pageSize,t.pageparm.total=e.data.data.count)}).catch(function(e){t.loading=!1,t.$message.error("获取角色列表失败，请稍后再试！")})},callFather:function(e){this.formInline.pageIndex=e.currentPage,this.formInline.pageSize=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.id=t.id,this.editForm.roleNo=t.roleNo,this.editForm.roleName=t.roleName):(this.title="添加",this.editForm.roleId="",this.editForm.roleNo="",this.editForm.roleName="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;""==t.editForm.id?(a=t.editForm,x("post","/api/Role/add",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.data.code>0?(t.getdata(t.formInline),t.$message({type:"success",message:"角色保存成功！"})):t.$message({type:"info",message:e.data.message})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("角色保存失败，请稍后再试！")}):function(e){return x("put","/api/Role/update/"+e.id,e)}(t.editForm).then(function(e){t.editFormVisible=!1,t.loading=!1,e.data.code>0?(t.getdata(t.formInline),t.$message({type:"success",message:"角色保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("角色保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,x("delete","/api/Role/delete/"+e)).then(function(e){e.data.code>0?(a.$message({type:"success",message:"角色已删除！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.data.message})}).catch(function(e){a.loading=!1,a.$message.error("角色删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},menuAccess:function(e,t){var a,i=this;this.menuAccessshow=!0,this.saveroleId=t.roleId,(a=t.roleId,x("post","/api/RoleRight/tree/"+a+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?(i.$message({type:"success",message:"获取权限成功"}),i.changemenu(e.data.data),i.RoleRight=i.changeArr(e.data.data)):i.$message({type:"info",message:e.data.msg})}).catch(function(e){i.loading=!1,i.$message.error("获取权限失败，请稍后再试！")})},changemenu:function(e){for(var t=[],a=0;a<e.length;a++)e[a].checked&&t.push(e[a].id);this.checkmenu=t},changeArr:function(e){var t=[],a=[],i=[];for(var r in e){if(!t[e[r].id]){var o={id:e[r].id,pId:e[r].pId,name:e[r].name,open:e[r].open,checked:e[r].checked,children:[]};t[e[r].id]=o,i.push(o)}e[r].uid>0&&t[e[r].id].children.push({id:e[r].id,pId:e[r].pId,name:e[r].name,open:e[r].open,checked:e[r].checked,children:[]})}for(var l in i)t[i[l].pId]?t[i[l].pId].children.push(t[i[l].id]):a.push(t[i[l].id]);return t=null,i=null,a},menuPermSave:function(){var e,t=this,a={roleId:this.saveroleId,moduleIds:""},i=this.$refs.tree.getCheckedNodes(),r=[];if(0!=i.length){for(var o=0;o<i.length;o++)r.push(i[o].id);a.moduleIds=p()(r)}(e=a,x("post","/api/RoleRight/save",e)).then(function(e){e.success?(t.$message({type:"success",message:"权限保存成功"}),t.menuAccessshow=!1,t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("权限保存失败，请稍后再试！")})},closeDialog:function(e){"edit"==e?this.editFormVisible=!1:"perm"==e&&(this.menuAccessshow=!1)}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入角色名称"},model:{value:e.formInline.search,callback:function(t){e.$set(e.formInline,"search",t)},expression:"formInline.search"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"roleName",label:"角色名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"roleNo",label:"角色代码",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.menuAccess(t.$index,t.row)}}},[e._v("菜单权限")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("edit")}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色代码",prop:"roleNo"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入角色代码"},model:{value:e.editForm.roleNo,callback:function(t){e.$set(e.editForm,"roleNo",t)},expression:"editForm.roleNo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("edit")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存\n      ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"菜单权限",visible:e.menuAccessshow,width:"30%"},on:{"update:visible":function(t){e.menuAccessshow=t},click:function(t){return e.closeDialog("perm")}}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.RoleRight,props:e.RoleRightProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":""}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("perm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.menuPermSave}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var fe=a("VU/8")(ue,pe,!1,function(e){a("zFbU")},"data-v-d55a20b4",null).exports,ge={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{deptId:"",deptName:"",deptNo:"",token:localStorage.getItem("logintoken")},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptNo:[{required:!0,message:"请输入部门代码",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=5,a=[{addUser:null,editUser:null,addTime:1521062371e3,editTime:15267002e5,deptId:2,deptName:"上海分公司",deptNo:"1",parentId:1},{addUser:null,editUser:null,addTime:1521063247e3,editTime:1526652291e3,deptId:3,deptName:"上海测试",deptNo:"02",parentId:1},{addUser:null,editUser:null,addTime:1526349555e3,editTime:1526349565e3,deptId:12,deptName:"1",deptNo:"11",parentId:1},{addUser:null,editUser:null,addTime:1526373178e3,editTime:1526373178e3,deptId:13,deptName:"5",deptNo:"5",parentId:1},{addUser:null,editUser:null,addTime:1526453107e3,editTime:1526453107e3,deptId:17,deptName:"v",deptNo:"v",parentId:1}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.deptId=t.deptId,this.editForm.deptName=t.deptName,this.editForm.deptNo=t.deptNo):(this.title="添加",this.editForm.deptId="",this.editForm.deptName="",this.editForm.deptNo="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,x("post","/api/Dept/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("公司保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.deptId,g.a.get("/api/Dept/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"公司已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("公司删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("公司管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入部门名称"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入部门代码"},model:{value:e.formInline.deptNo,callback:function(t){e.$set(e.formInline,"deptNo",t)},expression:"formInline.deptNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"deptName",label:"部门名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"deptNo",label:"部门代码",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门名称"},model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门代码",prop:"deptNo"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门代码"},model:{value:e.editForm.deptNo,callback:function(t){e.$set(e.editForm,"deptNo",t)},expression:"editForm.deptNo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ve=a("VU/8")(ge,he,!1,function(e){a("/w8P")},"data-v-2559cf9a",null).exports,be={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{varId:"",varLable:"",varName:"",varValue:"",token:localStorage.getItem("logintoken")},rules:{varLable:[{required:!0,message:"请输入变量描述",trigger:"blur"}],varName:[{required:!0,message:"请输入变量名称",trigger:"blur"}],varValue:[{required:!0,message:"请输入变量名称",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},watch:{},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=6,a=[{addUser:"root",editUser:"root",addTime:1519385529e3,editTime:1520619747e3,varId:190,deptId:1,varLable:"支付访问域名",varName:"domainName",varValue:"http://127.0.0.1:8080/iot-service-pay"},{addUser:"root",editUser:"root",addTime:1519451541e3,editTime:1519451547e3,varId:191,deptId:1,varLable:"商品图片地址",varName:"productImgURL",varValue:"http://ymwlw.com/pic"},{addUser:"root",editUser:"root",addTime:1519452658e3,editTime:1519452661e3,varId:192,deptId:1,varLable:"手机支付广告地址",varName:"groupDomain",varValue:"http://ymwlwl.com"},{addUser:null,editUser:null,addTime:1519879624e3,editTime:1519879628e3,varId:193,deptId:1,varLable:"下单接口测试模式",varName:"envType",varValue:"false"},{addUser:null,editUser:null,addTime:1526374014e3,editTime:1526374031e3,varId:198,deptId:null,varLable:"sgh",varName:"jhjj",varValue:"jhjhgs"},{addUser:null,editUser:null,addTime:1526453243e3,editTime:1526453243e3,varId:199,deptId:null,varLable:"v",varName:"v",varValue:"v"}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.varId=t.varId,this.editForm.varLable=t.varLable,this.editForm.varName=t.varName,this.editForm.varValue=t.varValue):(this.title="添加",this.editForm.varId="",this.editForm.varLable="",this.editForm.varName="",this.editForm.varValue="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,x("post","/api/Variable/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"系统环境变量保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("系统环境变量保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.varId,g.a.delete("/api/Variable/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"系统环境变量已删除"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("系统环境变量删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统环境变量")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入变量描述"},model:{value:e.formInline.varLable,callback:function(t){e.$set(e.formInline,"varLable",t)},expression:"formInline.varLable"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入变量名称"},model:{value:e.formInline.varName,callback:function(t){e.$set(e.formInline,"varName",t)},expression:"formInline.varName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"varLable",label:"变量描述",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"varName",label:"变量名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"varValue",label:"变量名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"变量描述",prop:"varLable"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量描述"},model:{value:e.editForm.varLable,callback:function(t){e.$set(e.editForm,"varLable",t)},expression:"editForm.varLable"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量名称",prop:"varName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量名称"},model:{value:e.editForm.varName,callback:function(t){e.$set(e.editForm,"varName",t)},expression:"editForm.varName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量名称",prop:"varValue"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量名称"},model:{value:e.editForm.varValue,callback:function(t){e.$set(e.editForm,"varValue",t)},expression:"editForm.varValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Ie=a("VU/8")(be,ye,!1,function(e){a("RH5b")},"data-v-2307a9ba",null).exports,_e={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{permissionId:"",permissionName:"",permission:"",token:localStorage.getItem("logintoken")},rules:{permissionName:[{required:!0,message:"请输入权限名称",trigger:"blur"}],permission:[{required:!0,message:"请输入权限CODE",trigger:"blur"}]},formInline:{page:1,limit:10,permissionName:"",permission:"",roleId:"0",token:localStorage.getItem("logintoken")},selectdata:[],userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},watch:{},created:function(){this.getdata(this.formInline),this.getAccsee()},methods:{getdata:function(e){this.loading=!0;var t=0,a=[{addUser:null,editUser:null,addTime:1519728609e3,editTime:15225857e5,permissionId:1,permissionName:"用户-列表",permission:"system:User:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:null,editUser:null,addTime:1519728667e3,editTime:1522585706e3,permissionId:3,permissionName:"用户-修改",permission:"system:User:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:null,editUser:null,addTime:1519728669e3,editTime:1522256096e3,permissionId:4,permissionName:"用户-删除",permission:"system:User:delete",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249365e3,editTime:1522256085e3,permissionId:5,permissionName:"系统管理:角色:列表",permission:"system:Role:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249588e3,editTime:1520249588e3,permissionId:7,permissionName:"system:Role:save",permission:"system:Role:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249588e3,editTime:1520249588e3,permissionId:8,permissionName:"system:Role:delete",permission:"system:Role:delete",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:9,permissionName:"system:Variable:列表",permission:"system:Variable:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:11,permissionName:"system:Variable:修改",permission:"system:Variable:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:12,permissionName:"system:Variable:删除",permission:"system:Variable:delete",lay_CHECKED:!1,LAY_CHECKED:!1}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},getAccsee:function(){var e=this;g.a.get("/api/Role/dropDown/all?&token="+localStorage.getItem("logintoken")).then(function(e){return e.data}).then(function(t){0==t.success?e.$message({type:"info",message:t.msg}):e.userparm=t.data}).catch(function(t){e.$message.error("权限获取失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.permissionId=t.permissionId,this.editForm.permissionName=t.permissionName,this.editForm.permission=t.permission):(this.title="添加",this.editForm.permissionId="",this.editForm.permissionName="",this.editForm.permission="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,x("post","/api/Permission/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"权限管理保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("权限管理保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.permissionId,g.a.delete("/api/Permission/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"权限管理已删除！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("权限管理删除失败,请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},selectChange:function(e){this.selectdata=e},RolePermission:function(){var e=this,t={roleId:"",permissionIds:""};if("0"==this.formInline.roleId)return this.$message({type:"info",message:"请选择角色"}),!1;t.roleId=this.formInline.roleId;var a,i=this.selectdata,r=[];if(0!=i)for(var o=0;o<i.length;o++)r.push(i[o].permissionId);t.permissionIds=r.join(","),(a=t,x("post","/api/RolePermission/save",a)).then(function(t){t.success?(e.$message({type:"success",message:"配置权限成功！"}),e.getdata(e.formInline)):e.$message({type:"info",message:t.msg})}).catch(function(t){e.loading=!1,e.$message.error("配置权限失败,请稍后再试！")})},closeDialog:function(){this.editFormVisible=!1}}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入权限名称"},model:{value:e.formInline.permissionName,callback:function(t){e.$set(e.formInline,"permissionName",t)},expression:"formInline.permissionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入权限CODE"},model:{value:e.formInline.permission,callback:function(t){e.$set(e.formInline,"permission",t)},expression:"formInline.permission"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.roleId,callback:function(t){e.$set(e.formInline,"roleId",t)},expression:"formInline.roleId"}},[a("el-option",{attrs:{selected:"",label:"请选择",value:"0"}}),e._v(" "),e._l(e.userparm,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.RolePermission()}}},[e._v("配置权限")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"permissionName",label:"权限名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"permission",label:"权限CODE",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"权限名称",prop:"permissionName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"权限名称"},model:{value:e.editForm.permissionName,callback:function(t){e.$set(e.editForm,"permissionName",t)},expression:"editForm.permissionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限CODE",prop:"permission"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"权限CODE"},model:{value:e.editForm.permission,callback:function(t){e.$set(e.editForm,"permission",t)},expression:"editForm.permission"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ke=a("VU/8")(_e,Fe,!1,function(e){a("uf0m")},"data-v-01e9fc18",null).exports,we={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",payType:[{key:"现金",value:1},{key:"支付宝",value:2},{key:"微信",value:3},{key:"POS通",value:4},{key:"闪付",value:5},{key:"POS通C扫B",value:6},{key:"银联二维码",value:8},{key:"会员余额支付",value:9}],editForm:{tcId:"",machineNo:"",payType:"",configId:"",configName:"",payOpen:"",token:localStorage.getItem("logintoken")},rules:{machineNo:[{required:!0,message:"请输入终端号",trigger:"blur"}],payType:[{required:!0,message:"请选择支付方式",trigger:"blur"}],configId:[{required:!0,message:"请输入配置序号",trigger:"blur"}],configName:[{required:!0,message:"请输入显示名称",trigger:"blur"}],payOpen:[{required:!0,message:"请选择状态",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=5,a=[{addUser:null,editUser:null,addTime:null,editTime:1524046759e3,tcId:1,deptId:1,machineNo:"564565656666",payType:3,payOpen:"T",configId:63,configName:"微信",posNo:"098"},{addUser:null,editUser:null,addTime:null,editTime:null,tcId:2,deptId:1,machineNo:"66666666",payType:2,payOpen:"T",configId:64,configName:"支付宝",posNo:null},{addUser:null,editUser:null,addTime:null,editTime:null,tcId:3,deptId:1,machineNo:"93066545645546500791",payType:6,payOpen:"T",configId:67,configName:"银商微信、支付宝",posNo:null},{addUser:null,editUser:null,addTime:null,editTime:null,tcId:4,deptId:1,machineNo:"65545656565",payType:6,payOpen:"T",configId:67,configName:"银商微信、支付宝",posNo:null},{addUser:null,editUser:null,addTime:1527409037e3,editTime:1527409037e3,tcId:6,deptId:1,machineNo:"565654545454545",payType:6,payOpen:"T",configId:96,configName:"微信",posNo:null}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.tcId=t.tcId,this.editForm.machineNo=t.machineNo,this.editForm.configId=t.configId,this.editForm.payType=t.payType,this.editForm.configName=t.configName,this.editForm.payOpen=t.payOpen):(this.title="添加",this.editForm.tcId="",this.editForm.machineNo="",this.editForm.payType="",this.editForm.configId="",this.editForm.configName="",this.editForm.payOpen="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,x("post","/api/MachineConfig/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("支付配置信息保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.deptId,g.a.delete("/api/MachineConfig/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"公司已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("支付配置信息删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(){this.editFormVisible=!1}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("支付配置信息")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入终端号"},model:{value:e.formInline.machineNo,callback:function(t){e.$set(e.formInline,"machineNo",t)},expression:"formInline.machineNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"machineNo",label:"终端号",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"payType",label:"支付方式",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"configName",label:"显示名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"payOpen",label:"状态",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"终端号",prop:"machineNo"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入终端号"},model:{value:e.editForm.machineNo,callback:function(t){e.$set(e.editForm,"machineNo",t)},expression:"editForm.machineNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.payType,callback:function(t){e.$set(e.editForm,"payType",t)},expression:"editForm.payType"}},e._l(e.payType,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"配置序号",prop:"configId"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入配置序号"},model:{value:e.editForm.configId,callback:function(t){e.$set(e.editForm,"configId",t)},expression:"editForm.configId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"显示名称",prop:"configName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入显示名称"},model:{value:e.editForm.configName,callback:function(t){e.$set(e.editForm,"configName",t)},expression:"editForm.configName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"payOpen"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.payOpen,callback:function(t){e.$set(e.editForm,"payOpen",t)},expression:"editForm.payOpen"}},[a("el-option",{attrs:{label:"正常",value:"T"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"N"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Ne=a("VU/8")(we,xe,!1,function(e){a("XEy1")},"data-v-2d01e4cd",null).exports,Te={data:function(){return{loading:!1,editFormVisible:!1,title:"添加",payType:[{key:"请选择",value:0},{key:"现金",value:1},{key:"支付宝",value:2},{key:"微信",value:3},{key:"POS通",value:4},{key:"闪付",value:5},{key:"POS通C扫B",value:6},{key:"银联二维码",value:8},{key:"会员余额支付",value:9}],editForm:{id:"",name:"",payType:1,partner:"",subMchId:"",appid:"",notifyUrl:"",signType:"",partnerKey:"",sellerUserId:"",certPath:"",certPassword:"",rsaKey:"",token:localStorage.getItem("logintoken")},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],payType:[{required:!0,message:"请选择支付方式",trigger:"blur"}],partner:[{required:!0,message:"请输入商户号",trigger:"blur"}],subMchId:[{required:!0,message:"请输入微信子商户号",trigger:"blur"}],appid:[{required:!0,message:"请输入应用ID",trigger:"blur"}],notifyUrl:[{required:!0,message:"请输入通知回调",trigger:"blur"}],signType:[{required:!0,message:"请输入加密类型",trigger:"blur"}],partnerKey:[{required:!0,message:"请输入商户签名密钥",trigger:"blur"}],sellerUserId:[{required:!0,message:"请输入支付宝卖家",trigger:"blur"}],certPath:[{required:!0,message:"请输入微信证书路径",trigger:"blur"}],certPassword:[{required:!0,message:"请输入微信证书密码",trigger:"blur"}],rsaKey:[{required:!0,message:"请输入支付宝私钥",trigger:"blur"}]},formInline:{page:1,limit:10,name:"",payType:0,partner:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:X},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=207,a=[{addUser:null,editUser:null,addTime:null,editTime:null,id:1,name:"支付宝2.0",payType:1,partner:"2015122801047567",subMchId:"",appid:"2015122801047567",notifyUrl:"r/pay/alipay/notify",signType:"RSA",partnerKey:"==",sellerUserId:"2088121360144859",certPath:"",certPassword:"",rsaKey:"",deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:2,name:"zzzzzz",payType:2,partner:"1250856201",subMchId:null,appid:"wx3ef7713adf0a97b8",notifyUrl:null,signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1250856201.p12",certPassword:"1250856201",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:3,name:" 待删除",payType:2,partner:"1271942301",subMchId:"1273729701",appid:"wx3ef7713adf0a97b8",notifyUrl:"/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:"",certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:5,name:"微信301",payType:2,partner:"1271942301",subMchId:"1341564201",appid:"wx3ef7713adf0a97b8",notifyUrl:"er/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/---0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:6,name:"微信301",payType:2,partner:"1271942301",subMchId:"1284797101",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/--provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:7,name:"微信301",payType:2,partner:"1271942301",subMchId:"1277531101",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:8,name:"微信301",payType:2,partner:"1271942301",subMchId:"1276485301",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:9,name:"微信",payType:2,partner:"1347158201",subMchId:"1351034701",appid:"wx83a7489c10c9c952",notifyUrl:"",signType:"NATIVE",partnerKey:"f174607ba704632b6cad2df8b04650d6",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1347158201.p12",certPassword:"1347158201",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:10,name:"-微信301",payType:2,partner:"1271942301",subMchId:"1357984702",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null},{addUser:null,editUser:null,addTime:null,editTime:null,id:11,name:"-微信301",payType:2,partner:"1271942301",subMchId:"1357972202",appid:"wx3ef7713adf0a97b8",notifyUrl:"http://180.166.211.210:8114/machine-pay-consumer/pay/wx/notify",signType:"NATIVE",partnerKey:"2e3cdaf5aa051c16563c0b8916184d5d",sellerUserId:null,certPath:"/usr/local/tomcat_provider/webapps/machine-service-provider-0.0.1-SNAPSHOT/conf/apiclient_cert_1271942301.p12",certPassword:"1271942301",rsaKey:null,deptId:null}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.id=t.id,this.editForm.name=t.name,this.editForm.payType=t.payType,this.editForm.partner=t.partner,this.editForm.subMchId=t.subMchId,this.editForm.appid=t.appid,this.editForm.notifyUrl=t.notifyUrl,this.editForm.signType=t.signType,this.editForm.partnerKey=t.partnerKey,this.editForm.sellerUserId=t.sellerUserId,this.editForm.certPath=t.certPath,this.editForm.certPassword=t.certPassword,this.editForm.rsaKey=t.rsaKey):(this.title="添加",this.editForm.id="",this.editForm.name="",this.editForm.payType="",this.editForm.partner="",this.editForm.subMchId="",this.editForm.appid="",this.editForm.notifyUrl="",this.editForm.signType="",this.editForm.partnerKey="",this.editForm.sellerUserId="",this.editForm.certPath="",this.editForm.certPassword="",this.editForm.rsaKey="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,x("post","/api/Config/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("支付配置信息保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.deptId,g.a.delete("/api/Config/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"公司已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("支付配置信息删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.editFormVisible=!1,this.$refs[e].resetFields()}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("支付配置")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.payType,callback:function(t){e.$set(e.formInline,"payType",t)},expression:"formInline.payType"}},e._l(e.payType,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入商户号"},model:{value:e.formInline.partner,callback:function(t){e.$set(e.formInline,"partner",t)},expression:"formInline.partner"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"名称",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"payType",label:"支付类型",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"partner",label:"商户号",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"subMchId",label:"微信子商户",width:"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"appid",label:"应用ID",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"signType",label:"加密类型",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"partnerKey",label:"商户签名密钥",width:"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"notifyUrl",label:"通知回调",width:"140","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"sellerUserId",label:"支付宝卖家",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"certPath",label:"微信证书路径",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("editForm")}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付类型",prop:"payType"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.payType,callback:function(t){e.$set(e.editForm,"payType",t)},expression:"editForm.payType"}},e._l(e.payType,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商户号",prop:"partner"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户号"},model:{value:e.editForm.partner,callback:function(t){e.$set(e.editForm,"partner",t)},expression:"editForm.partner"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信子商户",prop:"subMchId"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信子商户"},model:{value:e.editForm.subMchId,callback:function(t){e.$set(e.editForm,"subMchId",t)},expression:"editForm.subMchId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用ID",prop:"appid"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入应用ID"},model:{value:e.editForm.appid,callback:function(t){e.$set(e.editForm,"appid",t)},expression:"editForm.appid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通知回调",prop:"notifyUrl"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入通知回调"},model:{value:e.editForm.notifyUrl,callback:function(t){e.$set(e.editForm,"notifyUrl",t)},expression:"editForm.notifyUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加密类型",prop:"signType"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入加密类型"},model:{value:e.editForm.signType,callback:function(t){e.$set(e.editForm,"signType",t)},expression:"editForm.signType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商户签名密钥",prop:"partnerKey"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入商户签名密钥"},model:{value:e.editForm.partnerKey,callback:function(t){e.$set(e.editForm,"partnerKey",t)},expression:"editForm.partnerKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝卖家",prop:"sellerUserId"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入支付宝卖家"},model:{value:e.editForm.sellerUserId,callback:function(t){e.$set(e.editForm,"sellerUserId",t)},expression:"editForm.sellerUserId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信证书路径",prop:"certPath"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信证书路径"},model:{value:e.editForm.certPath,callback:function(t){e.$set(e.editForm,"certPath",t)},expression:"editForm.certPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信证书密码",prop:"certPassword"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入微信证书密码"},model:{value:e.editForm.certPassword,callback:function(t){e.$set(e.editForm,"certPassword",t)},expression:"editForm.certPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝私钥",prop:"rsaKey"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入支付宝私钥"},model:{value:e.editForm.rsaKey,callback:function(t){e.$set(e.editForm,"rsaKey",t)},expression:"editForm.rsaKey"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("editForm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Ue=a("VU/8")(Te,$e,!1,function(e){a("0PIF")},"data-v-60573cde",null).exports,ze={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("数据监控 监控查询")])},staticRenderFns:[]};var Se=a("VU/8")({},ze,!1,function(e){a("XH8V")},null,null).exports;l.default.use(c.a);var Ve=new c.a({routes:[{path:"/",name:"",component:D,hidden:!0,meta:{requireAuth:!1}},{path:"/login",name:"登录",component:D,hidden:!0,meta:{requireAuth:!1}},{path:"/index",name:"首页",component:L,iconCls:"el-icon-tickets",children:[{path:"/baseManage/Patient",name:"患者管理",component:j,meta:{requireAuth:!0}},{path:"/baseManage/VideoManage",name:"视频管理",component:G,meta:{requireAuth:!0}},{path:"/machine/Machine",name:"机器信息管理",component:ee,meta:{requireAuth:!0}},{path:"/machine/MachineAisle",name:"货道信息管理",component:ae,meta:{requireAuth:!0}},{path:"/pay/Order",name:"交易订单",component:oe,meta:{requireAuth:!0}},{path:"/system/user",name:"用户管理",component:ne,meta:{requireAuth:!0}},{path:"/system/Module",name:"菜单管理",component:ce,meta:{requireAuth:!0}},{path:"/system/Role",name:"角色管理",component:fe,meta:{requireAuth:!0}},{path:"/system/Dept",name:"公司管理",component:ve,meta:{requireAuth:!0}},{path:"/system/Variable",name:"系统环境变量",component:Ie,meta:{requireAuth:!0}},{path:"/system/Permission",name:"权限管理",component:ke,meta:{requireAuth:!0}},{path:"/machine/MachineConfig",name:"支付配置信息",component:Ne,meta:{requireAuth:!0}},{path:"/pay/Config",name:"支付配置",component:Ue,meta:{requireAuth:!0}},{path:"/druid/login",name:"监控查询",component:Se,meta:{requireAuth:!0}}]}]}),Ce=a("NYxO");l.default.use(Ce.a);var Pe=new Ce.a.Store({state:{user:!1},mutations:{login:function(e,t){e.user=t,localStorage.setItem("userInfo",t)},logout:function(e,t){e.user="",localStorage.setItem("userInfo","")}}}),Ae=(a("7xIN"),a("t4zo")),De=a.n(Ae),Ee=a("uXZL"),Me=a.n(Ee);l.default.prototype.$axios=g.a,l.default.prototype.$FileSaver=De.a,l.default.prototype.$XLSX=Me.a,l.default.config.productionTip=!1,l.default.use(n.a),o()(i).forEach(function(e){l.default.filter(e,i[e])}),Ve.beforeEach(function(e,t,a){0!=e.matched.length?e.meta.requireAuth?Boolean(localStorage.getItem("userInfo"))?a():a({path:"/login",query:{redirect:e.fullPath}}):Boolean(localStorage.getItem("userInfo"))?"/"!=e.path&&"/login"!=e.path?a():a({path:"/baseManage/Patient"}):a():a({path:"/login",query:{redirect:e.fullPath}})}),new l.default({el:"#app",router:Ve,store:Pe,components:{App:m},template:"<App/>",data:{Bus:new l.default}})},OGNB:function(e,t){},PSqM:function(e,t){},RH5b:function(e,t){},XEy1:function(e,t){},XH8V:function(e,t){},ce66:function(e,t){},"dLd/":function(e,t,a){e.exports=a.p+"static/img/logo.2921719.png"},dPK7:function(e,t){},ef1p:function(e,t){},gQKk:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA/0lEQVRYR+2W6w2CQBCEZyqRDrQEO9ASLAE7sAO1A+kAK1A7wA6wA61gzSVH4uPgbgMHJrK/l5kv++KIgYMD+2ME+KqAiKQAFpFacyS5e9V2ASwBzCIBFCTzRoBIxrWy4xCOFWhVARFJAEwUg3sjWfrW0Kxg8rkuLhN7M7YKgIzkygcwB3ACcAawJlkoDNSprkNUAVRiBwtyV6sHfBACYGSM+YbkPkBTlRIK8LAAb3dc5VSTHAKQAUhJ9t6CizXufQiHXUNNX+0hMscoNErvIQpV6iqv1SnuAmIE+L0KiIh5lE676K9D4+p9lNpfrIGIEbn3WR7DtUnz92bg7yrwBOSXVCGtUZf9AAAAAElFTkSuQmCC"},gy1J:function(e,t){},ox3T:function(e,t){},qVru:function(e,t){},qgky:function(e,t){},rWRm:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA80lEQVRYR+1W2xVBMRCcqYAO6IASqIASdEAHdEALOrg6UAIdUMk4e04+4rivuJL4yH4nO7OzTyKzMTM+CoEPBSTtAKwipeZC8uT7riOwBjCPROBGsmolEAm40W0pwqLAIAUkTQFMAgr3SfLxVRdIWgB4+A7czDgGEDiT3AQRcFEaiM2HJclrAGDn08YUSBoD2AI4eF7SEJBkMlnURsK3pARsZo+yEDBQlwJbTPvkKfCjdkVoatiGTJOCutLN1oZtfeTUsWHU197miH0aNAn7ora9KwSKAk1H6ewXBVbj4955lLoVa5svhlWdZ3kM1NKGf63ACzUdUCHpu3IjAAAAAElFTkSuQmCC"},rnpa:function(e,t){},sPkX:function(e,t){},tvR6:function(e,t){},uf0m:function(e,t){},zFbU:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2e4caf6d699dde2c57cd.js.map